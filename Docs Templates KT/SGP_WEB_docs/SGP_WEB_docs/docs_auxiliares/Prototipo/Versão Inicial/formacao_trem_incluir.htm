<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>SGP WEB</title>
	<link rel="stylesheet" href="css/sgpweb.css">
	
	<script language="javascript">
		vetFCA  = new Array("São João Del Rei","Tiradentes").sort();
		vetEFVM = new Array("Vitória", "Governador Valadares", "Ipatinga", "Nova Era", "Itabira", "Costa Lacerda", "Belo Horizonte").sort();
		vetEFC  = new Array("Anjo da Guarda", "Arari", "Vitória do Mearim", "Santa Ines", "Alto Alegre", "Mineirinho", "Auzilandia", "Altamira", "Presa de Porco", "Nova Vida", "Açailandia", "São Pedro Água Branca", "Marabá").sort();

		function limparEstacoes(local){
			for(i=document.getElementById("origem").options.length; i >= 1 ; i--){
				if ((local == 0) || (local==1)){			
					document.getElementById("origem").remove(i);
				}
				if ((local == 0) || (local==2)){							
					document.getElementById("destino").remove(i);
				}
			}	
		}

		function preencherrEstacoes(vet, local){
			for(i=0;i < vet.length; i++){
				if ((local == 0) || (local==1)){
					document.getElementById("origem").options[i+1]  = Option(vet[i],i);
				}
				if ((local == 0) || (local==2)){				
					document.getElementById("destino").options[i+1] = Option(vet[i],i);
				}
			}
		}
				
		function escolherEstacoes(sender, local){
			if (local == null){local = 0}
			switch (sender.value){
				case 'FCA'  : 
					limparEstacoes(local);
					preencherrEstacoes(vetFCA,local);
					break;
				case 'EFVM' : 
					limparEstacoes(local);
					preencherrEstacoes(vetEFVM,local);

					break;
				case 'EFC'  : 
					limparEstacoes(local);		
					preencherrEstacoes(vetEFC,local);
					break;
			}
		}
		
		function escolherOrigem(sender){
			if ((sender.value == document.getElementById("destino").options[document.getElementById("destino").selectedIndex].value) && (sender.value != "")){
				escolherEstacoes(document.getElementById("ferrovia"),2);							
				document.getElementById("destino").selectedIndex = 0;				
			}
			else{
				var i = document.getElementById("destino").selectedIndex;
				escolherEstacoes(document.getElementById("ferrovia"),2);				
				document.getElementById("destino").remove(document.getElementById("origem").selectedIndex);
				document.getElementById("destino").selectedIndex = i;
			}
		}

		function selecionarIdaVolta(sender){
			if (!sender.checked){
				limparEstacoes(2)				
			}
			else{
				escolherEstacoes(document.getElementById("ferrovia"),2);
			}			
		}
		function consultar(param){
			document.getElementById("consulta").style.display = param;
			//document.getElementById("comprar").style.display = param;
		}
		
		function exibeDetalhe(div){
			document.getElementById(div).style.left = tempX - 300;
			document.getElementById(div).style.top = tempY - 100;
			document.getElementById(div).style.display = 'inline';			
		}
		
		function ocultarDetalhe(div){
			document.getElementById(div).style.display = 'none';			
		}

		var tempX = 0
		var tempY = 0


		function getMouseXY(e) {
			  if (IE) { 
					tempX = event.clientX + document.body.scrollLeft
					tempY = event.clientY + document.body.scrollTop
			  } else {
					tempX = e.pageX
					tempY = e.pageY
			  }  
			  if (tempX < 0){tempX = 0}
			  if (tempY < 0){tempY = 0}  
			  return true
		}

		function cancelar(){
			if(confirm('Deseja realmente cancelar a venda?')){
				window.location = 'venda_bilhete_externo1.htm';
			}
		}
		
		var modelo		= new Array("Modelo","123","456","789","777");
		var classe  	= new Array("&nbsp;","Econômica","Executiva","Econômica","Executiva");
		var descricao  	= new Array("&nbsp;","Alfa", "Beta", "Teta", "Ômega");
		var acentos  	= new Array("&nbsp;","80", "60", "60", "80");	
		var acentosI  	= new Array("&nbsp;","1", "1", "1", "1");	
		var acentosF  	= new Array("&nbsp;","80", "50", "60", "80");				

		var param = 0
		function adicionarCarro(){
			param ++
			var tabela = document.getElementById("Resultado");
			
			var linha = tabela.insertRow(tabela.rows.length);

			if(linha.rowIndex % 2 == 0){linha.className = 'linhaImpar'}
			else{linha.className = 'linhaPar'}
			
			var cell = linha.insertCell();
			var img  = document.createElement("<img src='img/excluir.gif'>");
			img.style.cursor = 'hand';
			img.onclick = function(){
										tabela.deleteRow(linha.rowIndex);
										//Manter sempre a alternância de cores											
										for(i=2;i<tabela.rows.length;i++){
											if(i % 2 == 0){tabela.rows[i].className = 'linhaImpar'}
											else{tabela.rows[i].className = 'linhaPar'}
										}											
									}
			cell.className = 'bordaTDR'			
			cell.appendChild(img);
			
			var cell 	 = linha.insertCell();
			var oSelect  = document.createElement('select');
			oSelect.style.width = '90%'
			oSelect.name = 'select' + param
			oSelect.id   = 'select' + param
			
			for(i=0;i<modelo.length;i++){
				var oOption = document.createElement('option');
				oOption.text  = modelo[i];
				oOption.value = i;
				oSelect.options.add(oOption)
			}
			
			oSelect.onchange = function(){
									document.getElementById('classe' + oSelect.id ).innerHTML = classe[oSelect.selectedIndex]
									document.getElementById('descricao' + oSelect.id ).innerHTML = descricao[oSelect.selectedIndex]
									document.getElementById('nacentos' + oSelect.id ).innerHTML = acentos[oSelect.selectedIndex]
									document.getElementById('acentoi' + oSelect.id ).innerHTML = acentosI[oSelect.selectedIndex]
									document.getElementById('acentof' + oSelect.id ).innerHTML = acentosF[oSelect.selectedIndex]																																			
								}
			cell.className = 'bordaTDR'			
			cell.appendChild(oSelect)
			
			
			var cell 	 = linha.insertCell();			
			cell.id 	 = 'classe' + oSelect.id
			cell.name 	 = 'classe'	+ oSelect.id
			cell.className = 'bordaTDR'
			cell.innerHTML = '&nbsp;'
			
			var cell 	 = linha.insertCell();			
			cell.id 	 = 'descricao' + oSelect.id
			cell.name 	 = 'descricao' + oSelect.id
			cell.className = 'bordaTDR'			
			cell.innerHTML = '&nbsp;'

			var cell 	 = linha.insertCell();			
			cell.id 	 = 'nacentos' + oSelect.id
			cell.name 	 = 'nacentos' + oSelect.id
			cell.className = 'bordaTDR'			
			cell.innerHTML = '&nbsp;'		

			var cell 	 = linha.insertCell();			
			cell.id 	 = 'acentoi' + oSelect.id
			cell.name 	 = 'acentoi' + oSelect.id
			cell.className = 'bordaTDR'			
			cell.innerHTML = '&nbsp;'

			var cell 	 = linha.insertCell();			
			cell.id 	 = 'acentof' + oSelect.id
			cell.name 	 = 'acentof' + oSelect.id
			cell.className = 'bordaTDR'			
			cell.innerHTML = '&nbsp;'
			
			var cell 	 = linha.insertCell();			
			var img  = document.createElement("<img src='img/seta_cima.gif'>");
			img.style.cursor = 'hand';
			img.onclick = function(){
										if(linha.rowIndex>2){
											tabela.moveRow(linha.rowIndex, linha.rowIndex -1)
											//Manter sempre a alternância de cores
											for(i=2;i<tabela.rows.length;i++){
												if(i % 2 == 0){tabela.rows[i].className = 'linhaImpar'}
												else{tabela.rows[i].className = 'linhaPar'}
											}

										}
									}
			cell.className = 'bordaTDR'			
			cell.appendChild(img);

			var cell 	 = linha.insertCell();			
			var img  = document.createElement("<img src='img/seta_baixo.gif'>");
			img.style.cursor = 'hand';
			img.onclick = function(){
										if(linha.rowIndex < tabela.rows.length - 1){
											tabela.moveRow(linha.rowIndex, linha.rowIndex + 1)
											//Manter sempre a alternância de cores											
											for(i=2;i<tabela.rows.length;i++){
												if(i % 2 == 0){tabela.rows[i].className = 'linhaImpar'}
												else{tabela.rows[i].className = 'linhaPar'}
											}											
										}
									}
			cell.className = 'bordaTDR'			
			cell.appendChild(img);

			var cell = linha.insertCell();
			var img  = document.createElement("<img src='img/notepad.gif'>");
			img.style.cursor = 'hand';
			img.onclick = function() {exibeDetalhe("detalhe1")}
			cell.appendChild(img);		
			
		}
		
		function addAssento(i,f,descricao){
			var tabela = document.getElementById("ocupacao");
			var linha = tabela.insertRow(tabela.rows.length);

			if(linha.rowIndex % 2 == 0){linha.className = 'linhaImpar'}
			else{linha.className = 'linhaPar'}
									
			var cell = linha.insertCell();
			var img  = document.createElement("<img src='img/excluir.gif'>");
			img.style.cursor = 'hand';
			img.onclick = function(){
										tabela.deleteRow(linha.rowIndex);
											for(i=0;i<tabela.rows.length;i++){
												if(i % 2 == 0){tabela.rows[i].className = 'linhaImpar'}
												else{tabela.rows[i].className = 'linhaPar'}
											}											
									}
			cell.style.width= '2%'
			cell.appendChild(img);						
			
			var cell 	   = linha.insertCell();			
			cell.style.width= '25%'
			cell.innerHTML = i
			
			var cell 	   = linha.insertCell();			
			cell.style.width= '25%'
			cell.innerHTML = f

			var cell 	   = linha.insertCell();			
			//cell.style.width= '64%'
			cell.innerHTML = descricao

		}
	</script>	
    <style type="text/css">
<!--
.style1 {font-size: 12px}

#detalhe1 {	position:absolute;
	left:804px;
	top:160px;
	width:280px;
	height:147px;
	z-index:3;
}
#detalhe2 {	position:absolute;
	width:280px;
	height:115px;
	z-index:2;
	left: 810px;
	top: 193px;

}
.bordaTDR{
	border-right-style:dashed;
	border-right-width:1px;
}
-->
    </style>
</head>

<body>

<script>
	var IE = document.all?true:false
	if (!IE) document.captureEvents(Event.MOUSEMOVE)
	document.onmousemove = getMouseXY;
</script>
<form name="form">
  <table width="50%" border="0" align="center" cellpadding="0" cellspacing="0">
	  <tr >
		<td align="left" valign="middle">&nbsp;</td>
	  </tr>   
      <tr>
      <td height="30" align="left" valign="middle" class="linhaHeader"><div align="left" class="style1"><u>Administração de Trens >> Formação de Trem >> Incluir</u></div></td>
    </tr>
    <tr>
      <td align="left" valign="middle"><hr /></td>
    </tr>
  </table>
<table width="50%" border="0" align="center" cellpadding="3" cellspacing="0"  class="texto">
	  <tr>
		<td width="11%" class="textoDestacado">C&oacute;digo de Forma&ccedil;&atilde;o </td>
		<td colspan="2"><input name="codReserva" type="text" class="textoDestacado" id="codReserva" tabindex="1" />	    </td>
	  </tr>
	  <tr>
	    <td height="21" class="textoDestacado">Descri&ccedil;&atilde;o Resumida</td>
	    <td colspan="2"><textarea name="textarea" cols="45" class="textoDestacado" id="textarea" tabindex="1"></textarea></td>
  </tr>
	  <tr>
		<td height="21" class="textoDestacado">Descri&ccedil;&atilde;o Completa </td>
	    <td colspan="2"><textarea name="codReserva2" cols="45" class="textoDestacado" id="codReserva2" tabindex="1"></textarea></td>
	  </tr>
	  <tr>
		<td nowrap="nowrap" class="textoDestacado">Sentido</td>
	    <td colspan="2"><select name="select">
	      <option>Sentido</option>
	      <option value="S">Subindo</option>
	      <option value="D">Descendo</option>
	      </select>	    </td>
	  </tr>
	  
	  <tr>
	    <td colspan="3" nowrap="nowrap" align="center"><hr /></td>
  </tr>


	  <tr>
		<td colspan="3" align="center" nowrap="nowrap"><img src="img/bt_novo_carro.gif" name="imageField" width="90" height="20" onclick="adicionarCarro()"/>
		  &nbsp;&nbsp;&nbsp;
		  <img src="img/bt_confirmar.gif" name="imageField" width="90" height="20" onclick="alert('Inclusão feita com sucesso!');javascript:window.location = 'formacao_trem_consulta.htm'"/>&nbsp;&nbsp;&nbsp;&nbsp;</td>
	  </tr>
	  <tr>
		<td colspan="3" align="center" nowrap="nowrap"><hr /></td>
	  </tr>
</table>

<div id="consulta" style="display:inline;">


<div style="height:215px; width:50%; overflow-y:scroll; left:25%; position:absolute; ">
  <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
      <td align="left" valign="middle" class="linhaHeader" height="30"><div align="left" class="style1">Carros Dispon&iacute;veis </div></td>
    </tr>
    <tr>
      <td align="left" valign="middle"><hr /></td>
    </tr>

  </table>
  <table width="100%"  border="0" align="left" cellpadding="0" cellspacing="0" id="Resultado">
      <tr class="tableHeader">
        <td width="5%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;"></td>
        <td width="14%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;">Modelo</td>
        <td width="15%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;"><p>Classe</p>        </td>
        <td width="22%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;">Descri&ccedil;&atilde;o</td>
        <td width="13%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;">N&ordm; Acentos </td>
        <td colspan="2" style="border-right-style:dashed;border-right-width:1px;">Assentos</td>
        <td width="3%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;">&nbsp;</td>
        <td width="3%" rowspan="2" style="border-right-style:dashed;border-right-width:1px;">&nbsp;</td>
		 <td width="3%" rowspan="2">&nbsp;</td>
      </tr>
      <tr class="tableHeader">
        <td width="11%" style="border-right-style:dashed;border-right-width:1px;">Inicial</td>
        <td width="10%" style="border-right-style:dashed;border-right-width:1px;">Final</td>
      </tr>
    </table>
</div>


</div>

<div class="mandatoryCenter" id="detalhe1" style="width:382px;display:none;">
	<table width="100%" style="top:0px">
		<tr>
		  <td colspan="5" align="right"><span style="cursor:hand;" onclick="ocultarDetalhe('detalhe1')">Fechar</span></td>
		</tr>
		<tr class="tableHeader">
			<td width="11%">&nbsp;</td>				
			<td width="20%">Assento<br />Inicial</td>
			<td width="20%">Assento<br />Final</td>
			<td width="52%">Critério de Ocupação</td>		
			<td width="4%"></td>				
		</tr>
		<tr>
			<td align="center">&nbsp;</td>
			<td width="20%" align="center"><input type="text" name="assI" size="10" class="textoDestacado"/></td>
			<td width="20%" align="center"><input type="text" name="assF" size="10" class="textoDestacado"/></td>
			<td>
				<select class="textoDestacado" style="width:100%" name="assDesc">
					<option value="">		
					<option value="Uso geral">Uso geral
					<option value="Ponto a ponto">Ponto a ponto
					<option value="Origem fixa destino geral">Origem fixa destino geral
					<option value="Destino fixo origem geral">Destino fixo origem geral
					<option value="Preferencial">Preferencial
				</select>
			</td>		
			<td><img alt="Adicionar" src="img/mais.gif" onclick="addAssento(assI.value,assF.value,assDesc.value)" /></td>				
		</tr>
		
		<tr>
		<td colspan="4">
			<div style="width:364px; height:66px; position:absolute; overflow-y:auto; left:1px; top: 81px;">
				<table border="0" align="left" id="ocupacao" width="100%" height="29%" >

			  </table>
		  </div>
		</td>		
		</tr>
	</table>
</div>



</body>
</html>
